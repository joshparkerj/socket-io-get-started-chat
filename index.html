<!doctype html>
<html>
    <head>
        <title>
            Socket.IO chat
        </title>
        <link rel="stylesheet" type="text/css" href="/index.css">
    </head>
    <body>
        <h4 id="name-status"></h4>
        <ul id="messages">

        </ul>
        <div class="forms">
            <form id="messenger" action="">
                <input id="m" autocomplete="off" />
                <button>
                    Send message
                </button>
            </form>
            <form id="nickname" action="">
                <input id="n" />
                <button>
                    Change nickname
                </button>
            </form>
        </div>
        <script src="/socket.io/socket.io.js">
        
        </script>
        <script src="https://code.jquery.com/jquery-1.11.1.js">
        
        </script>
        <script>
            $(function(){
                const socket = io();
                $('#messenger').submit(function(){
                    socket.emit('chat message',$('#m').val());
                    $('#m').val('');
                    return false;
                });
                $('#nickname').submit(function(){
                    socket.emit('change name',$('#n').val());
                    $('#name-status').text(`Logged in as ${$('#n').val()}`);
                    $('#n').val('');
                    return false;
                })
                socket.on('chat message',msg => {
                    $('#messages').append($('<li>').text(msg));
                })
            });
        </script>
    </body>
</html>